# wirenboard [![--](https://img.shields.io/badge/telegram-wb-success)](https://t.me/wirenboard) [![--](https://img.shields.io/badge/telegram-sh-orange)](https://t.me/SprutAI_SprutHub)

Маленькая коллекция самописных правил и шаблонов для контроллеров [WirenBoard](https://wirenboard.com).

А так-же кастомные шаблоны для устройств на платформе [SprutHub](https://spruthub.ru).

## Установка шаблонов

#### Кастомные устройства spruthub

1. Скопировать интересующий файл с шаблоном из текущего репозитория
1. Перейти в **скрытую** пользовательскую папку `/mnt/data/makesimple/.SprutHub/data/Templates`
1. В зависимости от типа подключения устройства разместить шаблон в `MQTT/Custom` или `ZigBee/Custom`

#### Modbus устройства для wirenboard

1. Скопировать интересующий файл с шаблоном из текущего репозитория
1. Разместить шаблон в пользовательскую папку `/etc/wb-mqtt-serial.conf.d/templates`
1. Подождать 20 секунд или выполнить команду в консоли `systemctl restart wb-mqtt-confed`
1. На контроллере перейти в раздел: **Настройки - Конфиг. файлы - Настройка драйвера serial-устройств**
1. Выбрать интересующий последовательный порт и нажать на кнопку `＋Устройство`
1. В поле `Устройство с протоколом Modbus` найти и выбрать новый добавленный шаблон
1. Указать `Адрес устройства` на modbus шине и нажать `Записать` файл конфигурации

#### Правила wb-rules

1. Скопировать содержимое правила из файла в текущем репозитории
1. На контроллере перейти в раздел **Правила** и нажать кнопку `Создать...`
1. В первом поле указать название *(прим. rule.js)*, в поле ниже вставить содержимое, нажать `Сохранить`
1. Если в правиле реализует вирт. устройство - его можно увидеть в разделе **Устройства**